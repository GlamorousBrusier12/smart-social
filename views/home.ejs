<div id="container">
    <link rel="stylesheet" href="/css/home.css">
    <h1>this is the home page</h1>
    <p>this is rendered from the views by express</p>
    <section id="feed-posts">
            <h1>POSTS</h1>
            <% if(locals.user){ %>
                <form action="/posts/create" method="post">
                    <textarea name="content" id="post-content" cols="30" rows="5" placeholder="type here..." required></textarea>
                    <button type="submit" id="post-submit">Post</button>
                </form>
            <% }%>
            <div id="posts-display">
                <ul>
                    <% for(post  of posts){%>
                        <li>
                            <p>
                                 <%= post.content %>
                                 <br>
                                 <small><%= post.user.name %></small>
                                 <div id="comments-section">
                                    <% if(locals.user){ %>
                                        <form action="/comment/create" method="post">
                                            <textarea name="commentContent" id="comment-content" cols="15" rows="3" placeholder="comment here..." required></textarea>
                                            <input type="hidden" name="post" value="<%= post.id %>" >
                                            <button type="submit" id="add-comment">Add comment</button>
                                        </form>
                                    <% }%>
                                    <h4>comments</h4>
                                    <ul>
                                        <% for(let comment of post.comments){%>
                                            <li>
                                                <p><%=comment.content%></p>
                                                <small><%=comment.user.name %></small>
                                            </li>    
                                        <%} %>
                                    </ul>
                                 </div>
                            </p>
                        </li>    
                    <%} %>
                </ul>
            </div>
    </section>
    <script src="home.js"></script>
</div>